<!DOCTYPE html>
<html style="height:100%;">
    <head>
        <!-- jquery --><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

        <!-- materialize Compiled and minified CSS --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">

        <link rel="stylesheet" href="style.css">
        <!-- materialize Compiled and minified JavaScript --> <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
        <script src="googScripts.js"></script>
        <script src="fbScripts.js"></script>

    <script>

$(document).ready(function(){

    $('.section').hide();
    $('#header').show();
    $('#step1').show();
    $('.scrollspy').scrollSpy();
});

function loginworks() {
    $('#step2').show();
}

function dpress(){
    $("#driver1").show();
    $("#d, #f").addClass("disabled");  
}

function fpress(){
    $("#friend1").show();
    $("#d, #f").addClass("disabled");  
}


 /**
  * Render results in the DOM.
  * @param {Object} response Response object returned by the API.
  * @param {Object} rawResponse Raw response from the API.
  */
  function renderResults(response, rawResponse) {
    var el = document.getElementById('results');
    if (!response || response.error) {
      el.appendChild(document.createTextNode(
        'Error while trying to fetch polling place'));
        return;
     }
   var normalizedAddress = response.normalizedInput.line1 + ' ' +
       response.normalizedInput.city + ', ' +
       response.normalizedInput.state + ' ' +
       response.normalizedInput.zip;
   if (response.pollingLocations.length > 0) {
     var pollingLocation = response.pollingLocations[0].address;
     var pollingAddress = pollingLocation.locationName + ', ' +
         pollingLocation.line1 + ' ' +
         pollingLocation.city + ', ' +
         pollingLocation.state + ' ' +
         pollingLocation.zip;
     var normEl = document.createElement('strong');
     normEl.appendChild(document.createTextNode(
         'Polling place for ' + normalizedAddress + ': '));
     el.appendChild(normEl);
     el.appendChild(document.createTextNode(pollingAddress));
   } else {
     el.appendChild(document.createTextNode(
         'Could not find polling place for ' + normalizedAddress +
           ' (Did you register to vote from this address?)'));
   }
 }
 /**
  * Build and execute request to look up voter info for provided address.
  * @param {string} address Address for which to fetch voter info.
  * @param {function(Object)} callback Function which takes the
  *     response object as a parameter.
  */
  function lookup(address, callback) {
  /**
    * @type {number}
    */
   /**
    * Request object for given parameters.
    * @type {gapi.client.HttpRequest}
    */
     var req = gapi.client.request({
         'path' : '/civicinfo/v2/voterinfo',
         'params' : {'address' : address}
     });
     req.execute(callback);
 }

 /**
  * Initialize the API client and make a request.
  */
 function load() {
   $("#step3").show();
   var address = autocomplete.getPlace();
   gapi.client.setApiKey('AIzaSyAa1kEdRxD6kLiQgmEAt66nnOsDXsPnzBE');
   lookup(address.formatted_address, renderResults);
 }
 // This example displays an address form, using the autocomplete feature
 // of the Google Places API to help users fill in the information.
 // This example requires the Places library. Include the libraries=places
 // parameter when you first load the API. For example:
 var autocomplete;
 function initAutocomplete() {
 // Create the autocomplete object, restricting the search to geographical
 // location types.
   autocomplete = new google.maps.places.Autocomplete(
 /** @type {!HTMLInputElement} */(document.getElementById('autocomplete')),
   {types: ['geocode']});
 }
</script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAa1kEdRxD6kLiQgmEAt66nnOsDXsPnzBE&libraries=places&callback=initAutocomplete"
      async defer></script>
    <script src="https://apis.google.com/js/client.js"></script>
    </head>

    

    <body style="min-height:100%;" class="teal darken-2 white-text">
        <div class="container" style="min-height:100%;" >
            <header id="header" class="section">
                <h1 class="center-align">Vote With Friends</h1>
            </header>

            <main>
            <div id="step1" class="section scrollspy">   
                <div class="row">
                    <div class="col s12 m8 offset-m2">
                        <div class="card teal">
                            <div class="card-content">
                                <span class="card-title center-align">
                                    Log Into Facebook</span>
                                <p>Vote With Friends helps you arrange rides 
                                with your 
                                friends that will vote at the same polling 
                                location as you. Log into Facebook below to get
                                started.</p>
                                <div class="fb-login-button"
                                     style="width:50%; margin: 2em auto;" 
                                     data-size="xlarge" 
                                     data-show-faces="false"
                                     data-scope="user_friends, public_profile"
                                     onlogin="loginworks()"
                                     data-auto-logout-link="true"></div>
                            </div>
                        </div> <!--end card -->
                    </div>
                </div>
            </div> <!-- end step 1 -->

            <div id="step2" class="section scrollspy">
                <div class="row">
                    <div class="col s12 m8 offset-m2">
                        <div class="card teal">
                            <div class="card-content">
                                <span class="card-title center-align">
                                    Find Your Polling Station</span>
                                <p>Type in your address in the search bar 
                                below:</p>
                                <br>
                                <div class="input-field">
                                    <input id="autocomplete" type="text">
                                    <br>
                                    <a class="waves-effect waves-light
                                    btn-large" id="submitaddress"
                                    onclick="return load()">Submit</a>
                                </div>
                            </div>
                        </div> <!-- end card -->
                    </div>
                </div>

            </div> <!-- end of step2 -->


            <div id="step3" class="section scrollspy">
                <div class="row">
                    <div class="col s12 m8 offset-m2">
                        <div class="card teal">
                            <div class="card-content">
                                <span class="card-title center-align">Are You Driving?</span>
                                <p>Do you want to be a driver, or do you need
                                someone to take you to the polling station?</p>
                                <br>
                                <a class="waves-effect waves-light btn-large" 
                                    id="f" onclick="return dpress();">
                                I want to drive my friends.</a>
                                <br><br>
                                <a class="waves-effect waves-light btn-large" 
                                    id="f" onclick="return fpress()">
                                I am looking for a ride.</a>
                            </div>
                        </div> <!-- end card -->
                    </div>
                </div>

            </div> <!-- end of step3 -->

            <div id="driver1" class="section scrollspy">
                <div class="row">
                    <div class="col s12 m8 offset-m2">
                        <div class="card teal">
                            <div class="card-content">
                                <span class="card-title center-align">Election
                                Day Details</span>
                                <p>When are you driving?</p>
                                <p>How many people are you willing to take?</p>
                            </div>
                        </div> <!-- end card -->
                    </div>
                </div>

            </div> <!-- end of driver1 -->


            <div id="driver2" class="section scrollspy">
                <div class="row">
                    <div class="col s12 m8 offset-m2">
                        <div class="card teal">
                            <div class="card-content">
                                <span class="card-title center-align">Notify Your Friends</span>
                                <p>Let your friends know that you can drive them to vote!</p>
                            </div>
                        </div> <!-- end card -->
                    </div>
                </div>

            </div> <!-- end of driver2 -->

            <div id="friend1" class="section scrollspy">
                <div class="row">
                    <div class="col s12 m8 offset-m2">
                        <div class="card teal">
                            <div class="card-content">
                                <span class="card-title center-align">Join a Friend</span>
                                <p>Here's a list of your friends and when they're driving to the
                                polling station.</p>
                            </div>
                        </div> <!-- end card -->
                    </div>
                </div>

            </div> <!-- end of friend1 -->

            <div id="friend2" class="section scrollspy">
                <div class="row">
                    <div class="col s12 m8 offset-m2">
                        <div class="card teal">
                            <div class="card-content">
                                <span class="card-title center-align">Notify Your Friends</span>
                                <p>Let your friends know that you're going to go vote!</p>
                            </div>
                        </div> <!-- end card -->
                    </div>
                </div>

            </div> <!-- end of friend2 -->
            </main>

            <footer></footer>
        </div>
    </body>

</html>
